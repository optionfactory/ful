{"version":3,"file":"ful-client-errors.iife.js","sources":["../src/client-errors.js"],"sourcesContent":["function ful_report_error(evt){\n    function meta_content(name) {\n        var metaEls = document.getElementsByTagName(\"meta\");\n        var content = [].slice.call(metaEls).filter(function (v) {\n            return v.name === name;\n        }).map(function (v) {\n            return v.content;\n        });\n        return content[0];\n    }\n    function configured_report_uri(){\n        var scriptEl = document.querySelector('script[data-report-client-errors-uri]');\n        if(!scriptEl){\n            console && console.error && console.error(\"missing attribute data-report-client-errors-uri\");\n            return null;\n        }\n        return scriptEl.dataset['reportClientErrorsUri'];\n    }\n    function split_stack(){\n        if(evt.error && evt.error.stack && evt.error.stack.split){\n            return evt.error.stack.split(\"\\n\");\n        }\n        if(evt.reason && evt.reason.stack && evt.reason.stack.split){\n            return evt.reason.stack.split(\"\\n\");\n        }\n        return undefined\n    }\n    function message(){\n        if(evt.message){\n            return evt.message;\n        }\n        if(evt.reason && evt.reason.message){\n            return evt.reason.message;\n        }\n        if(evt.error && evt.error.message){\n            return evt.error.message;\n        }\n        return undefined;\n    }\n\n    var uri = configured_report_uri();\n    if(!uri){\n        return;\n    }\n    var headers = {\n        'Content-Type': 'application/json'\n    };\n    headers[meta_content(\"_csrf_header\")] = meta_content(\"_csrf\");\n    try {\n        fetch(uri, {\n            method: 'POST',\n            mode: 'same-origin',\n            cache: 'no-cache',\n            credentials: 'same-origin',\n            headers: headers,\n            redirect: 'error',\n            referrerPolicy: 'no-referrer-when-downgrade',\n            body: JSON.stringify({\n                page: window.location && window.location.href ? window.location.href : \"unknown\",\n                filename: evt.filename,\n                line: evt.lineno,\n                col: evt.colno,\n                message: message(),\n                stack: split_stack()\n            })\n        });\n    } catch (e) {\n        //nothing to do here\n    }\n}\n\nwindow.addEventListener('error', ful_report_error);\nwindow.addEventListener('unhandledrejection', ful_report_error);\n"],"names":[],"mappings":"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"}