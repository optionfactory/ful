{"version":3,"file":"ful-client-errors.iife.min.js","sources":["../src/client-errors.js"],"sourcesContent":["function ful_report_error(error){\n    function meta_content(name) {\n        var metaEls = document.getElementsByTagName(\"meta\");\n        var content = [].slice.call(metaEls).filter(function (v) {\n            return v.name === name;\n        }).map(function (v) {\n            return v.content;\n        });\n        return content[0];\n    }\n    function configured_report_uri(){\n        var scriptEl = document.querySelector('script[data-report-client-errors-uri]');\n        if(!scriptEl){\n            console && console.error && console.error(\"missing attribute data-report-client-errors-uri\");\n            return null;\n        }\n        return scriptEl.dataset['reportClientErrorsUri'];\n    }\n    var uri = configured_report_uri();\n    if(!uri){\n        return;\n    }\n    var headers = {\n        'Content-Type': 'application/json'\n    };\n    headers[meta_content(\"_csrf_header\")] = meta_content(\"_csrf\");\n    try {\n        fetch(uri, {\n            method: 'POST',\n            mode: 'same-origin',\n            cache: 'no-cache',\n            credentials: 'same-origin',\n            headers: headers,\n            redirect: 'error',\n            referrerPolicy: 'no-referrer-when-downgrade',\n            body: JSON.stringify({\n                page: window.location && window.location.href ? window.location.href : \"unknown\",\n                filename: error.filename,\n                line: error.lineno,\n                col: error.colno,\n                message: error.message,\n                stack: error.error && error.error.stack && error.error.stack.split ? error.error.stack.split(\"\\n\") : undefined\n            })\n        });\n    } catch (e) {\n        //nothing to do here\n    }\n}\n\nwindow.addEventListener('error', ful_report_error);\nwindow.addEventListener('unhandledrejection', ful_report_error);\n"],"names":["ful_report_error","error","meta_content","name","metaEls","document","getElementsByTagName","slice","call","filter","v","map","content","scriptEl","uri","querySelector","dataset","console","headers","fetch","method","mode","cache","credentials","redirect","referrerPolicy","body","JSON","stringify","page","window","location","href","filename","line","lineno","col","colno","message","stack","split","undefined","e","addEventListener"],"mappings":"yBAAA,SAASA,EAAiBC,GACtB,SAASC,EAAaC,GAClB,IAAIC,EAAUC,SAASC,qBAAqB,QAM5C,MALc,GAAGC,MAAMC,KAAKJ,GAASK,QAAO,SAAUC,GAClD,OAAOA,EAAEP,OAASA,CAC9B,IAAWQ,KAAI,SAAUD,GACb,OAAOA,EAAEE,OACrB,IACuB,EAClB,CASD,IAPQC,EAOJC,GAPID,EAAWR,SAASU,cAAc,0CAK/BF,EAASG,QAA+B,uBAH3CC,SAAWA,QAAQhB,OAASgB,QAAQhB,MAAM,mDACnC,MAKf,GAAIa,EAAJ,CAGA,IAAII,EAAU,CACV,eAAgB,oBAEpBA,EAAQhB,EAAa,iBAAmBA,EAAa,SACrD,IACIiB,MAAML,EAAK,CACPM,OAAQ,OACRC,KAAM,cACNC,MAAO,WACPC,YAAa,cACbL,QAASA,EACTM,SAAU,QACVC,eAAgB,6BAChBC,KAAMC,KAAKC,UAAU,CACjBC,KAAMC,OAAOC,UAAYD,OAAOC,SAASC,KAAOF,OAAOC,SAASC,KAAO,UACvEC,SAAUhC,EAAMgC,SAChBC,KAAMjC,EAAMkC,OACZC,IAAKnC,EAAMoC,MACXC,QAASrC,EAAMqC,QACfC,MAAOtC,EAAMA,OAASA,EAAMA,MAAMsC,OAAStC,EAAMA,MAAMsC,MAAMC,MAAQvC,EAAMA,MAAMsC,MAAMC,MAAM,WAAQC,KAKhH,CAFC,MAAOC,GAER,CAzBA,CA0BL,CAEAZ,OAAOa,iBAAiB,QAAS3C,GACjC8B,OAAOa,iBAAiB,qBAAsB3C"}