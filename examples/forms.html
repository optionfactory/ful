<html lang="it">

<head>
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.2/dist/css/bootstrap.min.css" rel="stylesheet"
        integrity="sha384-T3c6CoIi6uLrA9TneNEoa7RxnatzjcDSCmG1MXxSR1GAsXEV/Dwwykc2MPK8M2HN" crossorigin="anonymous">
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.2/dist/js/bootstrap.bundle.min.js"
        integrity="sha384-C6RzsynM9kWDrMNeT87bh95OGNyZPhcTNXj1NW7RuBCsyN/o0jlpcV8Qyq46cDfL"
        crossorigin="anonymous"></script>
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap-icons@1.11.2/font/bootstrap-icons.min.css"
        crossorigin="anonymous">

    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/tom-select@2.3.1/dist/css/tom-select.bootstrap5.min.css"
        integrity="sha256-4MwGlgBoHJALXjs2YKZb4sMqhSw7+yMymHAoa0cwJGE=" crossorigin="anonymous">
    <script src="https://cdn.jsdelivr.net/npm/tom-select@2.3.1/dist/js/tom-select.complete.min.js"
        integrity="sha256-KNeF6xW5o/tW1oae5XlS4JCNADoM+RHqrnoUqL6pvHY=" crossorigin="anonymous"></script>

    <script src="https://cdn.jsdelivr.net/npm/@optionfactory/ftl@0.17.0/dist/ftl.iife.min.js"
        integrity="sha256-mdKYHLmuPVaDwe+4srWerNG/uQOjaUYehgJRrWGidrs=" crossorigin="anonymous"></script>

    <link href="../dist/ful.css" rel="stylesheet">
    <script src="../dist/ful.iife.min.js"></script>
</head>

<body>
    <div class="container-fluid">
        <div class="row">
            <ful-form class="col-6 border border-primary">
                <h1>Classic layout</h1>
                <ful-input input-name="text.plain" class="mb-3">
                    text plain <sup>*</sup>
                </ful-input>
                <ful-input input-name="text.icons" class="mb-3">
                    Text with icons
                    <i slot="ibefore" class="bi bi-envelope-at"></i>
                    <i slot="iafter" class="bi bi-envelope-at"></i>
                </ful-input>
                <ful-input input-name="datetime" input-type="datetime-local" class="mb-3">
                    datetime-local
                </ful-input>
                <ful-input input-name="date" input-type="date" class="mb-3">
                    date
                </ful-input>
                <ful-input input-name="time" input-type="time" class="mb-3">
                    time
                </ful-input>
                <ful-select remote input-name="select.single" class="mb-3">
                    select single
                    <i slot="ibefore" class="bi bi-envelope-at"></i>
                    <i slot="iafter" class="bi bi-envelope-at"></i>
                </ful-select>
                <ful-select input-name="select.multiple" input-multiple remote class="mb-3">
                    select multiple
                    <i slot="ibefore" class="bi bi-envelope-at"></i>
                    <i slot="iafter" class="bi bi-envelope-at"></i>
                </ful-select>
                <ful-radio-group input-name="radio.vertical" class="mb-3">
                    A vertical radio group
                    <ful-radio value="one">One</ful-radio>
                    <ful-radio value="one">Two</ful-radio>
                </ful-radio-group>

                <ful-radio-group input-name="radio.horizontal" class="mb-3 horizontal">
                    An horizontal radio group
                    <ful-radio value="one">One</ful-radio>
                    <ful-radio value="one">Two</ful-radio>
                </ful-radio-group>


                <ful-errors></ful-errors>

                <button type="submit" class="btn btn-primary">
                    <ful-spinner hidden></ful-spinner>
                    submit
                </button>
            </ful-form>
            <ful-form class="col-6 border border-secondary">
                <h1>Floating layout</h1>
                <ful-input input-name="text.plain" floating class="mb-3">
                    Text plain
                </ful-input>
                <ful-input input-name="text.icons" floating class="mb-3">
                    Text icons <sup>*</sup>
                    <i slot="ibefore" class="bi bi-envelope-at"></i>
                    <i slot="iafter" class="bi bi-envelope-at"></i>
                </ful-input>
                <ful-input input-name="datetime" input-type="datetime-local" floating class="mb-3">
                    datetime-local
                </ful-input>
                <ful-input input-name="date" input-type="date" floating class="mb-3">
                    date
                </ful-input>
                <ful-input input-name="time" input-type="time" floating class="mb-3">
                    time
                </ful-input>

                <ful-select input-name="select.single" floating remote class="mb-3">
                    select: single
                    <i slot="ibefore" class="bi bi-envelope-at"></i>
                    <i slot="iafter" class="bi bi-envelope-at"></i>
                    <select slot="input">
                        <option value="16">aaa</option>
                        <option value="17">zzz</option>
                    </select>
                </ful-select>
                <ful-select input-name="select.multiple" input-multiple floating remote class="mb-3">
                    select: multiple
                    <i slot="ibefore" class="bi bi-envelope-at"></i>
                    <i slot="iafter" class="bi bi-envelope-at"></i>
                </ful-select>

                <ful-errors></ful-errors>

                <button type="submit" class="btn btn-primary">
                    <ful-spinner hidden></ful-spinner>
                    submit
                </button>

            </ful-form>
        </div>
        <div class="row">
            <ful-form class="col border border-primary">
                <h1>Classic layout big</h1>
                <ful-input input-name="blasd1" class="mb-3">
                    Label1 <sup>*</sup>
                    <input slot="input" class="form-control form-control-lg">
                </ful-input>
                <ful-select remote input-name="tomselect" class="mb-3" input-class="form-control-lg">
                    select single
                    <i slot="ibefore" class="bi bi-envelope-at"></i>
                    <i slot="iafter" class="bi bi-envelope-at"></i>
                </ful-select>
                <ful-select remote input-name="tomselect" input-multiple class="mb-3" input-class="form-control-lg">
                    select multiple
                    <i slot="ibefore" class="bi bi-envelope-at"></i>
                    <i slot="iafter" class="bi bi-envelope-at"></i>
                </ful-select>
            </ful-form>
        </div>
    </div>
    <script>

        const sleep = ful.timing.sleep;
        const Failure = ful.Failure;

        ful.FieldError.configure();
        ful.Errors.configure();
        ful.Spinner.configure();
        ful.Input.configure();
        ful.Select.configure();
        ful.RadioGroup.configure();
        ful.Form.custom('ful-form', {});

        document.addEventListener("DOMContentLoaded", () => {
            document.querySelectorAll('ful-form').forEach(form => {
                form.on('submit', async (data, form, acc) => {
                    await sleep(1000);
                    console.log("event1", data, form, acc);
                });
                form.on('submit', (data, form, acc) => {
                    console.log("event2", data, form, acc);
                });
                form.on('submit', (data, form, acc) => {
                    throw new Failure(0, [{
                        type: 'FIELD_ERROR',
                        context: 'text.plain',
                        reason: 'broken broken'
                    }, {
                        type: 'FIELD_ERROR',
                        context: 'select.multiple',
                        reason: 'Multiselect validation error message'
                    }, {
                        type: 'FIELD_ERROR',
                        context: 'radio.vertical',
                        reason: 'Vertical radio validation error message'
                    }, {
                        type: 'FIELD_ERROR',
                        context: 'radio.horizontal',
                        reason: 'Horizontal radio validation error message'
                    }, {
                        type: 'GLOBAL_ERROR',
                        reason: 'globally broken'
                    }]);
                });
            })

            document.querySelectorAll('ful-select').forEach(el => {
                el.setValue({ value: 1, text: "asd" });
                el.on('load', async () => {
                    console.log("load")
                    return [
                        { value: 1, text: "asd" },
                        { value: 2, text: "bsd" }
                    ]
                });
            })


        });
    </script>
</body>

</html>